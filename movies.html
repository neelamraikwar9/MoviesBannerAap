<!DOCTYPE html>
 <html>
  <head>
    <title>Movies</title>
    <link
      href="
  https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <header class="bg-light">
      <nav class="navbar navbar-expand-lg text-secondary">
        <div class="container">
          <a class="navbar-brand" href="index.html" class="nav-link"
            >Movie Database</a >
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button> 

          <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a href="index.html" class="nav-link">Home</a>
            </li>
            <li class="nav-item">
              <a href="movies.html" class="nav-link">Movies</a>
            </li>
            <li class="nav-item">
              <a href="report.html" class="nav-link">Report</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <!-- <main class="container">                                                                                                                                                                                                                                                                                                                                                          
      <h1 class="py-3">List of Movies</h1>
      <div class="row py-3">
      <div class="col-md-6">
      <div class="card">
      <div class="card-header">
      <h2>Movie 1</h2>
      </div>
      <div class="card-body">
      <p><strong>Genre: </strong>Action</p>
      <a class="btn btn-primary" href="moviesDetail.html?id=1">Details</a>
      </div>
    </div>
</div>


<div class="col-md-6">    
<div class="card">
<div class="card-header">
    <h2>Movie 2</h2>
      </div>
      <div class="card-body">
      <p><strong>Genre: </strong>Drama</p>
      <a class="btn btn-primary" href="moviesDetail.html?id=2">Details</a>
      </div>
    </div>
</div>
</div>




<div class="row py-3">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
      <h2>Movie 3</h2>
      </div>
      <div class="card-body">
      <p><strong>Genre: </strong>Comedy</p>
      <a class="btn btn-primary" href="moviesDetail.html?id=3">Details</a>
      </div>
</div>
</div>
</div>
    </main> -->
  

<section class="container">
  <!-- <div class="container " > -->
    <div class="d-flex p-2">
    <div class="container">
    <h1>List of Movies</h1>
    <label for="filterGenre">Filter by Genre:</label>
    <br>
    <select id=filterGenre class="form-select form-select-lg mb-3 Small select example">
      <option vlaue="All">All Genres</option>
      <option vlaue="Action">Action</option>
      <option vlaue="Drama">Drama</option>
    </select>
    </div>
    
    <br>
    <div class="container py-5">
    <label for="filterDirector">Filter by Director:</label>
    <br>
    <select id="filterDirector" class="form-select form-select-lg mb-3 Small select example">
      <option value="all">All Directors</option>
      <option value="John_Doe">John_Doe</option>
      <option value="Jane_Smith">Jane_Smith</option>
    </select> 
    </div>
    </div>
  </section>

 


  <form>
    <section class="container mt-3">
      <h2>Add a New Movie</h2>
      <label for="title">Title</label>
      <br>
      <input type="text" id="title" class="form-control"  required/>
      <br>
   

      <label for="genre">Genre:</label>
      <select id="genre" class="form-control" required>
        <option value="Action">Action</option>
        <option value="Drama">Drama</option>
        <option value="Comedy">Comedy</option>
      </select>
      <br>
     

      <label for="date">Release Date:</label>
      <br>
      <input type="date" placeholder="dd/mm/yyyy" id="date" class="form-control" required/>
      <br>
      

      <label for="director">Director:</label>
      <br>
      <input type="text" id="director" class="form-control"  required/>
      <br>
   
      <button type="button"  id="addMovieBtn" class="btn btn-primary">Add Movie</button>
  </form>
    </section>
<!-- This section is for adding new lists. -->
    <section id="movieList" class="container py-3"></section> 

    <script>
      const movies = [
        { id: 1, Movie:"Movie 1", Genre: "Action",  Release_Date: "2023-01-15", Director: "John_Doe"},
        { id: 2, Movie:"Movie 2", Genre: "Drama",  Release_Date: "2023-02-20" , Director: "Jane_Smith"}
      ];
      
      const addMovieBtn = document.querySelector("#addMovieBtn")
      const movieList = document.querySelector("#movieList")

      const filterGenre = document.querySelector("#filterGenre")
      const filterDirector = document.querySelector("#filterDirector")

      function updateMovieList(getFiltered){
        movieList.innerHTML = "";
        // console.log("getFiltered")

      for(let i = 0; i <  getFiltered.length; i++){
        const div = document.createElement('div')
        div.className = 'col-md-6'

        const card = document.createElement('div')
        card.className = 'card mb-3'

        const cardHeader = document.createElement('div')
        cardHeader.className = 'card-header'

        const h2 = document.createElement('h2')
        h2.innerHTML = `${getFiltered[i].Movie}`

        cardHeader.appendChild(h2)

        const cardBody = document.createElement('div')
        cardBody.className = 'card-body'

        const genre = document.createElement('p')
        genre.className = 'card-text'
        genre.innerHTML = `<strong>Genre: </strong> ${getFiltered[i].Genre}`


        const release = document.createElement('p')
        release.className = 'card-text'
        release.innerHTML = `<strong>Release Date: </strong> ${getFiltered[i].Release_Date}`

        const director = document.createElement('p')
        director.className = 'card-text'
        director.innerHTML = `<strong>Director: </strong>${getFiltered[i].Director}` 

        const detailLink = document.createElement('a')
        detailLink.href = `moviesDetail.html?id=${getFiltered[i].id}`
        detailLink.className = 'btn btn-primary';
        detailLink.textContent = "Details";

        cardBody.appendChild(genre)
        cardBody.appendChild(release)
        cardBody.appendChild(director)
        cardBody.appendChild(detailLink)

        card.appendChild(cardHeader)
        card.appendChild(cardBody)

        div.appendChild(card)
        movieList.appendChild(div)
      }
      }

      addMovieBtn.addEventListener("click", function(){
      const title = document.querySelector("#title").value
      const genre = document.querySelector("#genre").value
      const date = document.querySelector("#date").value
      const director = document.querySelector("#director").value
    

      if(title && genre && date && director){
        const newMovieId = movies.length + 1 
        const newMovie = 
        { id: newMovieId, Movie: title, Genre: genre,  Release_Date: date, Director: director}
         movies.push(newMovie)
         
         updateMovieList(movies)
      }
      })

      filterGenre.addEventListener("change", applyGenreFilter);

      function applyGenreFilter(){
        const selectedGenre = filterGenre.value;

        const getFiltered = [];

        if(selectedGenre !== "All"){
          for(let i = 0; i < movies.length; i++){
            if(movies[i].Genre === selectedGenre){
              getFiltered.push(movies[i]);
            }
          }
        }
        updateMovieList(getFiltered)

      }

      filterDirector.addEventListener("change", applyDirectorFilter);

      function applyDirectorFilter(){
        const selectedDirector = filterDirector.value;
        console.log(selectedDirector)

        const getFiltered = [];

        if(selectedDirector !== "all"){
        for(let i = 0; i < movies.length; i++){
          // console.log("inside for loop.")
        if(movies[i].Director === selectedDirector){
        // console.log("inside if-else")
        getFiltered.push(movies[i]);
        
        } 
        }
      }

      // console.log(getFiltered)
      updateMovieList(getFiltered)
   
      }

      updateMovieList(movies)

    </script>
  </body>
</html>



